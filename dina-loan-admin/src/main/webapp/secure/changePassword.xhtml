<html xmlns="http://www.w3.org/1999/xhtml"   
      xmlns:ui="http://java.sun.com/jsf/facelets" 
      xmlns:h="http://java.sun.com/jsf/html" 
      xmlns:p="http://primefaces.org/ui" > 
    <head>
        <title>Change Password</title>
    </head>
    <body>
        <ui:composition  template="/templates/masterLayout.xhtml">      
            <ui:define name="windowTitle">
                Change password
            </ui:define> 

            <ui:define name="content">   
                <h:form id="changePassowrdForm"   prependId="false">
                    <p:spacer width="10" />
                    <p:spacer width="10" />
                    <p:spacer width="10" />
                    <p:spacer width="10" />
                    <h:panelGrid id="userProfilePanel" styleClass="profilepanel"> 

                        <p:messages id="changePasswordSuccessMsg" autoUpdate="true" showDetail="true"  
                                    showSummary="false" closable="true"   showIcon="true" 
                                    rendered="#{user.isChangePasswordSuccessed}"  />

                        <p:messages id="changePasswordErrorMsg" autoUpdate="true" showDetail="true"  
                                    showSummary="false" closable="true"   showIcon="true" 
                                    rendered="#{!user.isChangePasswordSuccessed}"  />

                        <h:panelGrid columns="4" style="padding-left: 20px; " 
                                     cellpadding="0" cellspacing="0" id="changePasswordPanel" 
                                     rendered="#{!user.isChangePasswordSuccessed}" > 
                            <p:outputLabel value="Old password:  "  class="labeltext" for="oldPassword" />
                            <p:spacer width="10" />
                            <p:password value="#{user.oldPassword}" class="contexttext"  id="oldPassword"
                                        placeholder="Old password"   size="30" required="true"  /> 
                            <p:message for="oldPassword" id="oldPasswordMsg"  /> 

                            <p:outputLabel value="New password "  class="labeltext"  for="newPassword" />
                            <p:spacer width="10" />
                            <p:password value="#{user.newPassword}" class="contexttext" 
                                        match="newPasswordConfirmPassword"  
                                        placeholder="New password" id="newPassword" 
                                        size="30" required="true" feedback="true" inline="true" /> 
                            <p:message for="newPassword" id="newPasswordMsg"   />  

                            <p:outputLabel value="Confirm new password" class="labeltext"
                                           for="newPasswordConfirmPassword" />
                            <p:spacer width="10" />
                            <p:password value="#{user.password}" class="contexttext"  
                                        placeholder="Confirm new password" 
                                        id="newPasswordConfirmPassword" size="30" required="true" />
                            <p:spacer width="10" />

                            <p:spacer width="10" />
                            <p:spacer width="10" />
                            <p:spacer width="10" />
                            <p:spacer width="10" />

                            <p:spacer width="10" />
                            <p:spacer width="10" />
                            <p:commandButton value="Submit" actionListener="#{user.updatePassword()}" 
                                             update="userProfilePanel changePasswordErrorMsg" 
                                             process="@this,changePasswordPanel" />
                            <p:spacer width="10" /> 
                        </h:panelGrid>
                    </h:panelGrid> 
                </h:form>

            </ui:define>
        </ui:composition>
    </body>
</html>
